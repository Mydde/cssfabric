
@use 'menu-vars';
@use '../../_utils'; 

$menu-config: menu-vars.$menu-config; 

// read variables
$menu_class_name: map-get($menu-config, menu_class_name);
$menu_class_name_short: map-get($menu-config, menu_class_name_short);

$menu_item_class_name: map-get($menu-config, menu_item_class_name);
$menu_item_class_name_short: map-get($menu-config, menu_item_class_name_short);

$orientations: map-get($menu-config, orientations);
$menu_item_disabled_tag: map-get($menu-config, menu_item_disabled_tag);
$menu_item_selected_tag: map-get($menu-config, menu_item_selected_tag);

$menu_dropdown_tag: map-get($menu-config, menu_dropdown_tag);
$menu_dropdown_open: map-get($menu-config, menu_dropdown_open);
$menu_dropdown_close: map-get($menu-config, menu_dropdown_close);

@mixin buildMenu($mq_key) {
    $class_name: if($mq_key, #{$menu_class_name}-#{$mq_key}, #{$menu_class_name});

    #{$menu_class_name_short} {
        &.#{$class_name} { 
            list-style: none;
            list-style-type: none;

            @each $orientation_key, $orientation in $orientations {
                &-#{$orientation_key} { 
                    padding: 0;
                    margin: 0;

                    @if $orientation_key==h {  
                        display: flex; 
                        padding: 0 4rem;
                        position:relative;
                        border-bottom: 1px solid #ededed;

                        &:after {  
                            bottom: 0px;
                            left:0;
                            position: absolute; 
                            width: 100%;
                            padding: 1px;
                            box-shadow: 0 2px 2px #ccc;  
                            content: ' '; 
                        }   
                    }

                    & li.#{$menu_item_class_name},  
                    li {
                        &:hover {
                            background-color: #ededed;
                        }

                        @if $orientation_key==h {
                            flex: 1 1 0; 
                            border-left: 1px solid #ededed;
                            text-align: center;
                        }
                    }

                    & li { 
                        list-style: none;
                    }
                }
            }
        }
    }
}

$menu-border-color: red;   

ul {    
    border-bottom: 1px solid $menu-border-color;

    li { 
        margin: 0 4px;
        &.active { 
            border-bottom: 4px solid darken($menu-border-color, 30%);
        }
    }
}

/* & li.#{$menu_item_class_name}{
    dsp: none;
}
&-drop{
    dsp: none;
    & .#{$menu_class_name}-#{$menu_dropdown_open}{
        dsp: none;
        & li.#{$menu_item_class_name}, > li{
            dsp: none;
        }
    }
    & .#{$menu_class_name}-#{$menu_dropdown_close}{
        dsp: none;
        & li.#{$menu_item_class_name}, > li{
            dsp: none;
        }
    }
}*/
